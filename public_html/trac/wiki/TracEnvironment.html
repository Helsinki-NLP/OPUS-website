<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      TracEnvironment – OPUS
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="http://opus.nlpl.eu/trac/search" />
        <link rel="help" href="TracGuide.html" />
        <link rel="alternate" href="http://opus.nlpl.eu/trac/wiki/TracEnvironment?format=txt" type="text/x-trac-wiki" title="Plain Text" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/wiki.css" type="text/css" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/messages/en_US.js"></script>
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/folding.js"></script>
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW" />
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="../../index.php"><img src="../../img/opus_medium.jpg" alt="opus" height="90" /></a>
      </div>
      <form id="search" action="http://opus.nlpl.eu/trac/search" method="get">
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="http://opus.nlpl.eu/trac/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="../wiki.html">Wiki</a></li><li class="last"><a href="../roadmap.html">Roadmap</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="pagepath" class="noprint">
  <a class="pathentry first" title="View WikiStart" href="../wiki.html">wiki:</a><a class="pathentry" href="TracEnvironment.html" title="View TracEnvironment">TracEnvironment</a>
</div>
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
        <ul>
          <li class="first"><a href="WikiStart.html">Start Page</a></li><li><a href="TitleIndex.html">Index</a></li><li class="last"><a href="http://opus.nlpl.eu/trac/wiki/TracEnvironment?action=history">History</a></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <div class="wikipage searchable">
        
          <div id="wikipage" class="trac-content"><h1 id="TheTracEnvironment">The Trac Environment</h1>
<p>
</p><div class="wiki-toc"><h4>Table of Contents</h4><ul><li class="False"><a class="False" href="TracGuide.html">Index</a></li><li class="False"><a class="False" href="TracInstall.html">Installation</a></li><li class="False"><a class="False" href="TracInterfaceCustomization.html">Customization</a></li><li class="False"><a class="False" href="TracPlugins.html">Plugins</a></li><li class="False"><a class="False" href="TracUpgrade.html">Upgrading</a></li><li class="False"><a class="False" href="TracIni.html">Configuration</a></li><li class="False"><a class="False" href="TracAdmin.html">Administration</a></li><li class="False"><a class="False" href="TracBackup.html">Backup</a></li><li class="False"><a class="False" href="TracLogging.html">Logging</a></li><li class="False"><a class="False" href="TracPermissions.html">Permissions</a></li><li class="False"><a class="False" href="TracWiki.html">The Wiki</a></li><li class="False"><a class="False" href="WikiFormatting.html">Wiki Formatting</a></li><li class="False"><a class="False" href="TracTimeline.html">Timeline</a></li><li class="False"><a class="False" href="TracBrowser.html">Repository Browser</a></li><li class="False"><a class="False" href="TracRevisionLog.html">Revision Log</a></li><li class="False"><a class="False" href="TracChangeset.html">Changesets</a></li><li class="False"><a class="False" href="TracTickets.html">Tickets</a></li><li class="False"><a class="False" href="TracWorkflow.html">Workflow</a></li><li class="False"><a class="False" href="TracRoadmap.html">Roadmap</a></li><li class="False"><a class="False" href="TracQuery.html">Ticket Queries</a></li><li class="False"><a class="False" href="TracBatchModify.html">Batch Modify</a></li><li class="False"><a class="False" href="TracReports.html">Reports</a></li><li class="False"><a class="False" href="TracRss.html">RSS Support</a></li><li class="False"><a class="False" href="TracNotification.html">Notification</a></li></ul></div><p>
</p><div class="wiki-toc">
<ol>
  <li>
    <a href="TracEnvironment.html#TheTracEnvironment">The Trac Environment</a>
    <ol>
      <li>
        <a href="TracEnvironment.html#CreatinganEnvironment">Creating an Environment</a>
        <ol>
          <li>
            <a href="TracEnvironment.html#UsefulTips">Useful Tips</a>
          </li>
        </ol>
      </li>
      <li>
        <a href="TracEnvironment.html#DatabaseConnectionStrings">Database Connection Strings</a>
        <ol>
          <li>
            <a href="TracEnvironment.html#SQLiteConnectionString">SQLite Connection String</a>
          </li>
          <li>
            <a href="TracEnvironment.html#PostgreSQLConnectionString">PostgreSQL Connection String</a>
          </li>
          <li>
            <a href="TracEnvironment.html#MySQLConnectionString">MySQL Connection String</a>
          </li>
        </ol>
      </li>
      <li>
        <a href="TracEnvironment.html#SourceCodeRepository">Source Code Repository</a>
      </li>
      <li>
        <a href="TracEnvironment.html#DirectoryStructure">Directory Structure</a>
        <ol>
          <li>
            <a href="TracEnvironment.html#Caveat">Caveat: don't confuse a <em>Trac environment directory</em> with the <em>source …</em></a>
          </li>
        </ol>
      </li>
    </ol>
  </li>
</ol>
</div><p>
</p>
<p>
Trac uses a directory structure and a database for storing project data. The directory is referred to as the environment.
</p>
<h2 id="CreatinganEnvironment">Creating an Environment</h2>
<p>
A new Trac environment is created using <a class="wiki" href="TracAdmin.html#initenv">trac-admin's initenv</a>:
</p>
<div class="code"><pre><span class="nv">$ </span>trac-admin /path/to/myproject initenv
</pre></div><p>
<tt>trac-admin</tt> will ask you for the name of the project and the database connection string, see below.
</p>
<h3 id="UsefulTips">Useful Tips</h3>
<ul><li>Place your environment's directory on a filesystem which supports sub-second timestamps, as Trac monitors the timestamp of its configuration files and changes happening on a filesystem with too coarse-grained timestamp resolution may go undetected in Trac &lt; 1.0.2. This is also true for the location of authentication files when using <a class="wiki" href="TracStandalone.html">TracStandalone</a>.
</li></ul><ul><li>The user under which the web server runs will require file system write permission to 
the environment directory and all the files inside. Please remember to set
the appropriate permissions. The same applies to the source code repository, 
although the user under which Trac runs will only require write access to a Subversion repository created with the BDB file system; for other repository types, check the corresponding plugin's documentation. 
</li></ul><p>
 
</p>
<ul><li><tt>initenv</tt>, when using an svn repository, does not imply that trac-admin will perform <tt>svnadmin create</tt> for the specified repository path. You need to perform the <tt>svnadmin create</tt> prior to <tt>trac-admin initenv</tt> if you're creating a new svn repository altogether with a new trac environment, otherwise you will see a message "Warning: couldn't index the repository" when initializing the environment.
</li></ul><ul><li>Non-ascii environment paths are not supported.
</li></ul><p>
 
</p>
<ul><li>Also, it seems that project names with spaces can be problematic for authentication, see <a class="ext-link" href="http://trac.edgewall.org/intertrac/%237163" title="#7163 in Trac project trac"><span class="icon">​</span>#7163</a>.
</li></ul><ul><li><a class="wiki" href="TracPlugins.html">TracPlugins</a> located in a <a class="wiki" href="TracIni.html#inherit-section">shared plugins folder</a> that is defined in an <a class="wiki" href="TracIni.html#GlobalConfiguration">inherited configuration</a> are currently not loaded during creation, and hence, if they need to create extra tables for example, you'll need to <a class="wiki" href="TracUpgrade.html#UpgradetheTracEnvironment">upgrade the environment</a> before being able to use it.
</li></ul><h2 id="DatabaseConnectionStrings">Database Connection Strings</h2>
<p>
Trac supports <a class="ext-link" href="http://sqlite.org/"><span class="icon">​</span>SQLite</a>, <a class="ext-link" href="http://www.postgresql.org/"><span class="icon">​</span>PostgreSQL</a> and <a class="ext-link" href="http://mysql.com/"><span class="icon">​</span>MySQL</a> database backends. The default is SQLite, which is probably sufficient for most projects. The database file is then stored in the environment directory, and can easily be <a class="wiki" href="TracBackup.html">backed up</a> together with the rest of the environment.
</p>
<p>
Note that if the username or password of the connection string (if applicable) contains the <tt>:</tt>, <tt>/</tt> or <tt>@</tt> characters, they need to be URL encoded.
</p>
<h3 id="SQLiteConnectionString">SQLite Connection String</h3>
<p>
The connection string for an SQLite database is:
</p>
<pre class="wiki">sqlite:db/trac.db
</pre><p>
where <tt>db/trac.db</tt> is the path to the database file within the Trac environment.
</p>
<h3 id="PostgreSQLConnectionString">PostgreSQL Connection String</h3>
<p>
If you want to use PostgreSQL instead, you'll have to use a different connection string. For example, to connect to a PostgreSQL database on the same machine called <tt>trac</tt> for user <tt>johndoe</tt> with the password <tt>letmein</tt> use:
</p>
<pre class="wiki">postgres://johndoe:letmein@localhost/trac
</pre><p>
If PostgreSQL is running on a non-standard port, for example 9342, use:
</p>
<pre class="wiki">postgres://johndoe:letmein@localhost:9342/trac
</pre><p>
On UNIX, you might want to select a UNIX socket for the transport, either the default socket as defined by the PGHOST environment variable:
</p>
<pre class="wiki">postgres://user:password@/database
</pre><p>
or a specific one:
</p>
<pre class="wiki">postgres://user:password@/database?host=/path/to/socket/dir
</pre><p>
Note that with PostgreSQL you will have to create the database before running <tt>trac-admin initenv</tt>.
</p>
<p>
See the <a class="ext-link" href="http://www.postgresql.org/docs/"><span class="icon">​</span>PostgreSQL documentation</a> for detailed instructions on how to administer <a class="ext-link" href="http://postgresql.org"><span class="icon">​</span>PostgreSQL</a>.
Generally, the following is sufficient to create a database user named <tt>tracuser</tt> and a database named <tt>trac</tt>:
</p>
<div class="code"><pre><span class="nv">$ </span>createuser -U postgres -E -P tracuser
<span class="nv">$ </span>createdb -U postgres -O tracuser -E UTF8 trac
</pre></div><p>
When running <tt>createuser</tt> you will be prompted for the password for the user 'tracuser'. This new user will not be a superuser, will not be allowed to create other databases and will not be allowed to create other roles. These privileges are not needed to run a trac instance. If no password is desired for the user, simply remove the <tt>-P</tt> and <tt>-E</tt> options from the <tt>createuser</tt> command.  Also note that the database should be created as UTF8. LATIN1 encoding causes errors trac's use of unicode in trac.  SQL_ASCII also seems to work.
</p>
<p>
Under some default configurations (debian) one will have run the <tt>createuser</tt> and <tt>createdb</tt> scripts as the <tt>postgres</tt> user.  For example:
</p>
<div class="code"><pre><span class="nv">$ </span>sudo su - postgres -c <span class="s1">'createuser -U postgres -S -D -R -E -P tracuser'</span>
<span class="nv">$ </span>sudo su - postgres -c <span class="s1">'createdb -U postgres -O tracuser -E UTF8 trac'</span>
</pre></div><p>
Trac uses the <tt>public</tt> schema by default, but you can specify a different schema in the connection string:
</p>
<pre class="wiki">postgres://user:pass@server/database?schema=yourschemaname
</pre><h3 id="MySQLConnectionString">MySQL Connection String</h3>
<p>
The format of the MySQL connection string is similar to those for PostgreSQL, with the <tt>postgres</tt> scheme being replaced by <tt>mysql</tt>. For example, to connect to a MySQL database on the same machine called <tt>trac</tt> for user <tt>johndoe</tt> with password <tt>letmein</tt>, the MySQL connection string is:
</p>
<pre class="wiki">mysql://johndoe:letmein@localhost:3306/trac
</pre><h2 id="SourceCodeRepository">Source Code Repository</h2>
<p>
Since Trac 0.12, a single environment can be connected to more than one repository. There are many different ways to connect repositories to an environment, see <a class="wiki" href="TracRepositoryAdmin.html">TracRepositoryAdmin</a>. This page also details the various attributes that can be set for a repository, such as <tt>type</tt>, <tt>url</tt>, <tt>description</tt>.
</p>
<p>
In Trac 0.12 <tt>trac-admin</tt> no longer asks questions related to repositories. Therefore, by default Trac is not connected to any source code repository, and the <em>Browse Source</em> toolbar item will not be displayed.
You can also explicitly disable the <tt>trac.versioncontrol.*</tt> components, which are otherwise still loaded.
</p>
<div class="code"><pre><span class="k">[components]</span>
<span class="na">trac.versioncontrol.*</span> <span class="o">=</span> <span class="s">disabled</span>
</pre></div><p>
For some version control systems, it is possible to specify not only the path to the repository, but also a <em>scope</em> within the repository. Trac will then only show information related to the files and changesets below that scope. The Subversion backend for Trac supports this. For other types, check the corresponding plugin's documentation.
</p>
<p>
Example of a configuration for a Subversion repository used as the default repository:
</p>
<div class="code"><pre><span class="k">[trac]</span>
<span class="na">repository_type</span> <span class="o">=</span> <span class="s">svn</span>
<span class="na">repository_dir</span> <span class="o">=</span> <span class="s">/path/to/your/repository</span>
</pre></div><p>
The configuration for a scoped Subversion repository would be:
</p>
<div class="code"><pre><span class="k">[trac]</span>
<span class="na">repository_type</span> <span class="o">=</span> <span class="s">svn</span>
<span class="na">repository_dir</span> <span class="o">=</span> <span class="s">/path/to/your/repository/scope/within/repos</span>
</pre></div><h2 id="DirectoryStructure">Directory Structure</h2>
<p>
An environment directory will usually consist of the following files and directories:
</p>
<ul><li><tt>README</tt> - Brief description of the environment.
</li><li><tt>VERSION</tt> - Environment version identifier.
</li><li><tt>attachments</tt> - Attachments to wiki pages and tickets are stored here.
</li><li><tt>conf</tt>
<ul><li><tt>trac.ini</tt> - Main configuration file. See <a class="wiki" href="TracIni.html">TracIni</a>.
</li></ul></li><li><tt>db</tt>
<ul><li><tt>trac.db</tt> - The SQLite database, if you are using SQLite.
</li></ul></li><li><tt>htdocs</tt> - Directory containing web resources, which can be referenced in Genshi templates using <tt>/htdocs/site/...</tt> URLs.
</li><li><tt>log</tt> - Default directory for log files, if logging is turned on and a relative path is given.
</li><li><tt>plugins</tt> - Environment-specific <a class="wiki" href="TracPlugins.html">plugins</a>.
</li><li><tt>templates</tt> - Custom Genshi environment-specific templates.
<ul><li><tt>site.html</tt> - Method to customize header, footer, and style, described in <a class="wiki" href="TracInterfaceCustomization.html#SiteAppearance">TracInterfaceCustomization#SiteAppearance</a>.
</li></ul></li></ul><h3 id="Caveat">Caveat: don't confuse a <em>Trac environment directory</em> with the <em>source code repository directory</em></h3>
<p>
This is a common beginners' mistake.
It happens that the structure for a Trac environment is loosely modelled after the Subversion repository directory 
structure, but those are two disjoint entities and they are not and <em>must not</em> be located at the same place.
</p>
<hr />
<p>
See also: <a class="wiki" href="TracAdmin.html">TracAdmin</a>, <a class="wiki" href="TracBackup.html">TracBackup</a>, <a class="wiki" href="TracIni.html">TracIni</a>, <a class="wiki" href="TracGuide.html">TracGuide</a>
</p>
</div>
          
          <div class="trac-modifiedby">
            <span><a href="http://opus.nlpl.eu/trac/wiki/TracEnvironment?action=diff&amp;version=2" title="Version 2 by trac">Last modified</a> <a class="timeline" href="http://opus.nlpl.eu/trac/timeline?from=2015-02-25T21%3A38%3A24Z&amp;precision=second" title="See timeline at Feb 25, 2015, 9:38:24 PM">6 years ago</a></span>
            <span class="trac-print">Last modified on Feb 25, 2015, 9:38:24 PM</span>
          </div>
        
        
      </div>
      

    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/trac/pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="http://opus.nlpl.eu/trac/wiki/TracEnvironment?format=txt">Plain Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 1.0.1</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>