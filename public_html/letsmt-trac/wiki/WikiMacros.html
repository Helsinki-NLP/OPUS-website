<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      WikiMacros – LetsMT
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="http://opus.nlpl.eu/letsmt-trac/search" />
        <link rel="help" href="TracGuide.html" />
        <link rel="alternate" href="http://opus.nlpl.eu/letsmt-trac/wiki/WikiMacros?format=txt" type="text/x-trac-wiki" title="Plain Text" /><link rel="alternate" href="http://opus.nlpl.eu/letsmt-trac/wiki/WikiMacros?format=tex" type="text/x-trac-wiki" title="Latex" /><link rel="alternate" href="http://opus.nlpl.eu/letsmt-trac/wiki/WikiMacros?format=pdf" type="text/x-trac-wiki" title="Latex-Pdf" />
        <link rel="start" href="../wiki.html" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/wiki.css" type="text/css" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/messages/en_US.js"></script>
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/folding.js"></script>
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW" />
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.letsmt.eu/"><img src="/letsmt-trac/letsmt.jpg" alt="LetsMT" width="100" /></a>
      </div>
      <form id="search" action="http://opus.nlpl.eu/letsmt-trac/search" method="get">
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="http://opus.nlpl.eu/letsmt-trac/login">Login</a></li><li><a href="../prefs.html">Preferences</a></li><li><a href="TracGuide.html">Help/Guide</a></li><li class="last"><a href="../about.html">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="../wiki.html">Wiki</a></li><li class="last"><a href="../roadmap.html">Roadmap</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="pagepath" class="noprint">
  <a class="pathentry first" title="View WikiStart" href="../wiki.html">wiki:</a><a class="pathentry" href="WikiMacros.html" title="View WikiMacros">WikiMacros</a>
</div>
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
        <ul>
          <li class="first"><a href="WikiStart.html">Start Page</a></li><li><a href="TitleIndex.html">Index</a></li><li class="last"><a href="http://opus.nlpl.eu/letsmt-trac/wiki/WikiMacros?action=history">History</a></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <div class="wikipage searchable">
        
          <div id="wikipage" class="trac-content"><h1 id="TracMacros">Trac Macros</h1>
<p>
</p><div class="wiki-toc">
<ol>
  <li>
    <a href="WikiMacros.html#TracMacros">Trac Macros</a>
    <ol>
      <li>
        <a href="WikiMacros.html#UsingMacros">Using Macros</a>
        <ol>
          <li>
            <a href="WikiMacros.html#GettingDetailedHelp">Getting Detailed Help</a>
          </li>
          <li>
            <a href="WikiMacros.html#Example">Example</a>
          </li>
        </ol>
      </li>
      <li>
        <a href="WikiMacros.html#AvailableMacros">Available Macros</a>
      </li>
      <li>
        <a href="WikiMacros.html#Macrosfromaroundtheworld">Macros from around the world</a>
      </li>
      <li>
        <a href="WikiMacros.html#DevelopingCustomMacros">Developing Custom Macros</a>
        <ol>
          <li>
            <a href="WikiMacros.html#Macrowithoutarguments">Macro without arguments</a>
          </li>
          <li>
            <a href="WikiMacros.html#Macrowitharguments">Macro with arguments</a>
          </li>
        </ol>
      </li>
    </ol>
  </li>
</ol>
</div><p>
</p>
<p>
Trac macros are plugins to extend the Trac engine with custom 'functions' written in Python. A macro inserts dynamic HTML data in any context supporting <a class="wiki" href="WikiFormatting.html">WikiFormatting</a>. Its syntax is <tt>[[macro-name(optional-arguments)]]</tt>.
</p>
<p>
The <a class="wiki" href="WikiProcessors.html">WikiProcessors</a> are another kind of macros. They typically deal with alternate markup formats and transformation of larger "blocks" of information, like source code highlighting. They are used for processing the multiline <tt>{{{#!wiki-processor-name ... }}}</tt> blocks.
</p>
<h2 id="UsingMacros">Using Macros</h2>
<p>
Macro calls are enclosed in two <em>square brackets</em> <tt>[[..]]</tt>. Like Python functions, macros can also have arguments, a comma separated list within parentheses <tt>[[..(,)]]</tt>.
</p>
<h3 id="GettingDetailedHelp">Getting Detailed Help</h3>
<p>
The list of available macros and the full help can be obtained using the MacroList macro, as seen <a class="wiki" href="WikiMacros.html#AvailableMacros">below</a>.
</p>
<p>
A brief list can be obtained via <tt>[[MacroList(*)]]</tt> or <tt>[[?]]</tt>.
</p>
<p>
Detailed help on a specific macro can be obtained by passing it as an argument to MacroList, e.g. <tt>[[MacroList(MacroList)]]</tt>, or, more conveniently, by appending a question mark (<tt>?</tt>) to the macro's name, like in <tt>[[MacroList?]]</tt>.
</p>
<h3 id="Example">Example</h3>
<p>
A list of the 3 most recently changed wiki pages starting with 'Trac':
</p>
<table class="wiki">
<tr><th> Wiki Markup </th><th> Display 
</th></tr><tr><td><pre class="wiki">[[RecentChanges(Trac,3)]]
</pre></td><td style="padding-left: 2em"><p>
</p><div><h3>Feb 25, 2015</h3><ul><li><a href="TracQuery.html">TracQuery</a><small> (<a href="http://opus.nlpl.eu/letsmt-trac/wiki/TracQuery?action=diff&amp;version=3">diff</a>)</small>
</li><li><a href="TracReports.html">TracReports</a><small> (<a href="http://opus.nlpl.eu/letsmt-trac/wiki/TracReports?action=diff&amp;version=3">diff</a>)</small>
</li><li><a href="TracLogging.html">TracLogging</a><small> (<a href="http://opus.nlpl.eu/letsmt-trac/wiki/TracLogging?action=diff&amp;version=2">diff</a>)</small>
</li></ul></div><p>
</p>
</td></tr><tr>
<td><pre class="wiki">[[RecentChanges?(Trac,3)]]
</pre></td><td style="padding-left: 2em"><p>
</p><div class="trac-macrolist"><h3 id="RecentChanges-macro"><code>[[RecentChanges]]</code></h3><p>
List all pages that have recently been modified, ordered by the
time they were last modified.
</p>
<p>
This macro accepts two ordered arguments and a named argument. The named
argument can be placed in any position within the argument list.
</p>
<p>
The first parameter is a prefix string: if provided, only pages with names
that start with the prefix are included in the resulting list. If this
parameter is omitted, all pages are included in the list.
</p>
<p>
The second parameter is the maximum number of pages to include in the
list.
</p>
<p>
The <tt>group</tt> parameter determines how the list is presented:
<dl class="wiki"><dt><tt>group=date</tt></dt><dd>The pages are presented in bulleted lists that are
grouped by date (default).
</dd><dt><tt>group=none</tt></dt><dd>The pages are presented in a single bulleted list.
</p>
</dd></dl>
<p>
Tip: if you only want to specify a maximum number of entries and
don't want to filter by prefix, specify an empty first parameter,
e.g. <tt>[[RecentChanges(,10,group=none)]]</tt>.
</p>
</div><p>
</p>
</td></tr><tr>
<td><pre class="wiki">[[?]]
</pre></td><td style="padding-left: 2em"><div style="font-size: 80%" class="trac-macrolist">
<h3><code>[[Image]]</code></h3>Embed an image in wiki-formatted text.
The first argument is the file …
<h3><code>[[InterTrac]]</code></h3>Provide a list of known <a class="wiki" href="http://opus.nlpl.eu/wiki/InterTrac">InterTrac</a> prefixes.
<h3><code>[[InterWiki]]</code></h3>Provide a description list for the known <a class="wiki" href="http://opus.nlpl.eu/wiki/InterWiki">InterWiki</a> prefixes.
<h3><code>[[KnownMimeTypes]]</code></h3>List all known mime-types which can be used as <a class="wiki" href="http://opus.nlpl.eu/wiki/WikiProcessors">WikiProcessors</a>.
Can be …</div>
<p>
etc.
</p>
</td></tr></table>
<h2 id="AvailableMacros">Available Macros</h2>
<p>
<em>Note that the following list will only contain the macro documentation if you've not enabled <tt>-OO</tt> optimizations, or not set the <tt>PythonOptimize</tt> option for <a class="wiki" href="TracModPython.html">mod_python</a>.</em>
</p>
<p>
</p><div class="trac-macrolist"><h3 id="CommitTicketReference-macro"><code>[[CommitTicketReference]]</code></h3><p>
Insert a changeset message into the output.
</p>
<p>
This macro must be called using wiki processor syntax as follows:
</p>
<pre class="wiki">{{{
#!CommitTicketReference repository="reponame" revision="rev"
}}}
</pre><p>
where the arguments are the following:
</p>
<ul><li><tt>repository</tt>: the repository containing the changeset
</li><li><tt>revision</tt>: the revision of the desired changeset
</li></ul><h3 id="Image-macro"><code>[[Image]]</code></h3><p>
Embed an image in wiki-formatted text.
</p>
<p>
The first argument is the file specification. The file specification may
reference attachments in three ways:
</p>
<ul><li><tt>module:id:file</tt>, where module can be either <strong>wiki</strong> or <strong>ticket</strong>,
to refer to the attachment named <em>file</em> of the specified wiki page or
ticket.
</li><li><tt>id:file</tt>: same as above, but id is either a ticket shorthand or a Wiki
page name.
</li><li><tt>file</tt> to refer to a local attachment named 'file'. This only works from
within that wiki page or a ticket.
</li></ul><p>
Also, the file specification may refer to repository files, using the
<tt>source:file</tt> syntax (<tt>source:file@rev</tt> works also).
</p>
<p>
Files can also be accessed with a direct URLs; <tt>/file</tt> for a
project-relative, <tt>//file</tt> for a server-relative, or <tt>http://server/file</tt>
for absolute location of the file.
</p>
<p>
The remaining arguments are optional and allow configuring the attributes
and style of the rendered <tt>&lt;img&gt;</tt> element:
</p>
<ul><li>digits and unit are interpreted as the size (ex. 120, 25%)
for the image
</li><li><tt>right</tt>, <tt>left</tt>, <tt>center</tt>, <tt>top</tt>, <tt>bottom</tt> and <tt>middle</tt> are interpreted
as the alignment for the image (alternatively, the first three can be
specified using <tt>align=...</tt> and the last three using <tt>valign=...</tt>)
</li><li><tt>link=some TracLinks...</tt> replaces the link to the image source by the
one specified using a <a class="wiki" href="TracLinks.html">TracLinks</a>. If no value is specified, the link is
simply removed.
</li><li><tt>nolink</tt> means without link to image source (deprecated, use <tt>link=</tt>)
</li><li><tt>key=value</tt> style are interpreted as HTML attributes or CSS style
indications for the image. Valid keys are:
<ul><li>align, valign, border, width, height, alt, title, longdesc, class,
margin, margin-(left,right,top,bottom), id and usemap
</li><li><tt>border</tt>, <tt>margin</tt>, and <tt>margin-</tt>* can only be a single number
</li><li><tt>margin</tt> is superseded by <tt>center</tt> which uses auto margins
</li></ul></li></ul><p>
Examples:
</p>
<pre class="wiki">    [[Image(photo.jpg)]]                           # simplest
    [[Image(photo.jpg, 120px)]]                    # with image width size
    [[Image(photo.jpg, right)]]                    # aligned by keyword
    [[Image(photo.jpg, nolink)]]                   # without link to source
    [[Image(photo.jpg, align=right)]]              # aligned by attribute
</pre><p>
You can use image from other page, other ticket or other module.
</p>
<pre class="wiki">    [[Image(OtherPage:foo.bmp)]]    # if current module is wiki
    [[Image(base/sub:bar.bmp)]]     # from hierarchical wiki page
    [[Image(#3:baz.bmp)]]           # if in a ticket, point to #3
    [[Image(ticket:36:boo.jpg)]]
    [[Image(source:/images/bee.jpg)]] # straight from the repository!
    [[Image(htdocs:foo/bar.png)]]   # image file in project htdocs dir.
</pre><p>
<em>Adapted from the Image.py macro created by Shun-ichi Goto
&lt;gotoh@…&gt;</em>
</p>
<h3 id="Include-macro"><code>[[Include]]</code></h3><p>
Inserts the contents of another wiki page. It expands arguments in the page in the form {{N}}.
</p>
<p>
Example:
<div class="system-message"><strong>Error: Macro Include(wiki:WikiStart) failed</strong><pre>charmap&lt;h1 id="LetsMT"&gt;LetsMT&lt;/h1&gt;
&lt;p&gt;
A project on "Building a Platform for Online Sharing of Training Data and Building User Tailored MT".
&lt;/p&gt;
&lt;p&gt;
These are the internal development pages of Uppsala, one of the partners in the LetsMT project. For the official pages please look at &lt;a class="ext-link" href="http://project.letsmt.eu/"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;http://project.letsmt.eu/&lt;/a&gt; and &lt;a href="http://www.letsmt.eu/"&gt;http://www.letsmt.eu/&lt;/a&gt;.
&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/Workpackages"&gt;Workpackages&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/Tasks"&gt;List of Tasks&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/Deliverables"&gt;List of Deliverables&lt;/a&gt;
&lt;/li&gt;&lt;/ul&gt;&lt;h2 id="LetsMTRepositoryDocumentation"&gt;LetsMT Repository Documentation&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;a class="ext-link" href="http://opus.lingfil.uu.se/letsmt-trac/raw-attachment/wiki/D2.2/D2.2.pdf"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;Detailed Software Documentation (D2.2)&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/BasicConcepts"&gt;Basic Concepts&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/DataFormats"&gt;Data Formats&lt;/a&gt; (see also &lt;a class="ext-link" href="http://opus.lingfil.uu.se/letsmt-trac/raw-attachment/wiki/D2.1/D2.1.pdf"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;D2.1&lt;/a&gt;)
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/RepositoryStructure"&gt;Repository Structure&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/LetsMTsSystemComponents"&gt;LetsMT's System Components&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/NewRepositoryWebService"&gt;LetsMT Resource Repository - Web Service API&lt;/a&gt;
&lt;ul&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/WebAPISummary"&gt;API summary with examples&lt;/a&gt;
&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/SSL"&gt;Client side authentication&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/ImportConfig"&gt;Configuration of automatic import and alignment&lt;/a&gt;
&lt;/li&gt;&lt;/ul&gt;&lt;h2 id="Releases"&gt;Releases&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/Releases"&gt;Release information&lt;/a&gt;&lt;/strong&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="ext-link" href="http://opus.lingfil.uu.se/letsmt-dev/releases/?C=M;O=D"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;Release Downloads&lt;/a&gt;
&lt;/li&gt;&lt;/ul&gt;&lt;h2 id="LetsMTRepositoryInstallationandConfigurationInstructions"&gt;LetsMT Repository Installation and Configuration Instructions&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/RepositorySetup"&gt;Installation &amp;amp; Setup&lt;/a&gt;&lt;/strong&gt;
&lt;ul&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/RepositorySetup#AllComponents"&gt;All components on the same machine&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/RepositorySetup#FrontendClient"&gt;Only the frontend client&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/RepositorySetup#RRServer"&gt;Only the repository server&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/RepositorySetup#StorageServer"&gt;Only the Storage server&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/RepositorySetup#SGEClient"&gt;Only the SGE client&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/RepositorySetup#WebInterface"&gt;The Web user interface&lt;/a&gt;
&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/TroubleShooting"&gt;Trouble Shooting / F.A.Q.&lt;/a&gt;
&lt;/li&gt;&lt;/ul&gt;&lt;h2 id="DocumentationCodeDevelopment"&gt;Documentation &amp;amp; Code Development&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/UseLetsMT"&gt;Using The LetsMT Resource Repository Software&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/RepositoryCode"&gt;Code Development &amp;amp; Extension&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="ext-link" href="http://opus.lingfil.uu.se/letsmt-dev/doc/"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;Generated Documentation&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="ext-link" href="http://opus.lingfil.uu.se/letsmt-trac/browser/letsmt_mirror/letsmt/trunk/dev/src"&gt;&lt;span class="icon"&gt;​&lt;/span&gt;Browse the Source Code&lt;/a&gt;
&lt;/li&gt;&lt;/ul&gt;&lt;h2 id="DevelopmentandTestEnvironmentSetupInstructions"&gt;Development and Test Environment Setup Instructions&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/Amazon"&gt;EC2 instructions&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/GridSetup"&gt;GridEngine Setup&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/VirtualMachines"&gt;VirtualBox Setup and Operation&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/StorageBackendSetup"&gt;Storage Backends and File System Optimization&lt;/a&gt;
&lt;/li&gt;&lt;/ul&gt;&lt;h2 id="RelatedToolsandResources"&gt;Related Tools and Resources&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/DataProcessingTools"&gt;List of data processing and MT tools&lt;/a&gt;
&lt;/li&gt;&lt;li&gt;&lt;a class="wiki" href="/letsmt-trac/wiki/MTResources"&gt;MT-related resources&lt;/a&gt;
&lt;/li&gt;&lt;/ul&gt;&lt;hr /&gt;
&lt;h2 id="Internal"&gt;Internal&lt;/h2&gt;
&lt;p&gt;
&lt;a class="forbidden wiki" title="no permission to view this wiki page"&gt;Internal Pages&lt;/a&gt;
&lt;/p&gt;
349350character maps to &lt;undefined&gt;</pre></div>
</p>
<p>
WARNING: avoid recursive inclusion.
</p>
<h3 id="InterTrac-macro"><code>[[InterTrac]]</code></h3><p>
Provide a list of known <a class="wiki" href="InterTrac.html">InterTrac</a> prefixes.
</p>
<h3 id="InterWiki-macro"><code>[[InterWiki]]</code></h3><p>
Provide a description list for the known <a class="wiki" href="InterWiki.html">InterWiki</a> prefixes.
</p>
<h3 id="KnownMimeTypes-macro"><code>[[KnownMimeTypes]]</code></h3><p>
List all known mime-types which can be used as <a class="wiki" href="WikiProcessors.html">WikiProcessors</a>.
</p>
<p>
Can be given an optional argument which is interpreted as mime-type filter.
</p>
<h3 id="Latex-macro"><code>[[Latex]]</code></h3><p>
Latex <a class="missing wiki">WikiProcessor?</a>:
Now you can specify small pieces of latex code into any wiki context, like <a class="wiki" href="WikiHtml.html">WikiHtml</a>.
</p>
<p>
Ex.:
</p>
<pre class="wiki">   {{{
   #!Latex
   %label=fig_math
   %width=800
   %height=600
   %dpi=300
   %use=package[opts]:package_url
   $\frac{\alpha^{\beta^2}}{\delta + \alpha}$

   }}}
</pre><p>
This code will produce a PNG file and a PDF file, both will be added to Attachments section.
</p>
<p>
The parameters are specified as latex comments.
</p>
<p>
%label  Picture label, default value is 'unnamed', if two differents blocks has the same label,
just the last block will be rendered.
</p>
<p>
%width  PNG and display width.
</p>
<p>
%height PNG and display height.
</p>
<p>
%dpi    Dots per Inch (resolution), default value is 300.
</p>
<h3 id="LatexBasicHeaders-macro"><code>[[LatexBasicHeaders]]</code></h3><p>
HTML version for <a class="missing wiki">TexLatexBasicHeadersMacro?</a>
    
</p>
<h3 id="LatexBeginDoc-macro"><code>[[LatexBeginDoc]]</code></h3><p>
HTML version for <a class="missing wiki">TexLatexBeginDocMacro?</a>
    
</p>
<h3 id="LatexCmd-macro"><code>[[LatexCmd]]</code></h3><p>
HTML version for <a class="missing wiki">TexLatexCmdMacro?</a>
    
</p>
<h3 id="LatexDocCls-macro"><code>[[LatexDocCls]]</code></h3><p>
HTML version for <a class="missing wiki">TexLatexDocClsMacro?</a>
    
</p>
<h3 id="LatexDummy-macro"><code>[[LatexDummy]]</code></h3><p>
Macro with no effect
    
</p>
<h3 id="LatexEndDoc-macro"><code>[[LatexEndDoc]]</code></h3><p>
HTML version for <a class="missing wiki">TexLatexEndDocMacro?</a>
    
</p>
<h3 id="LatexGetRes-macro"><code>[[LatexGetRes]]</code></h3><p>
HTML version for <a class="missing wiki">TexLatexGetResMacro?</a>
    
</p>
<h3 id="LatexLongTable-macro"><code>[[LatexLongTable]]</code></h3><p>
HTML version for <a class="missing wiki">TexLatexLongTableMacro?</a>
    
</p>
<h3 id="LatexRender-macro"><code>[[LatexRender]]</code></h3><p>
Like Latex <a class="missing wiki">WikiProcessor?</a> <a class="missing wiki">LatexRender?</a> macro is used to specify small pieces of latex code
into any wiki context, but <a class="missing wiki">LatexRender?</a> support latex code specified in other files
(svn, attachments) and support external dependecies.
</p>
<p>
Ex.:
</p>
<pre class="wiki">[[LatexRender(source:/docs/tex/math.tex,inc=mymacros.sty,inc=others.sty,width=800,height=600,dpi=300)]]
</pre><p>
This example will produce the same two figures as <a class="missing wiki">LatexMacro?</a> using the tex file /docs/tex/math.tex in SVN
with two external dependencies (\usepackage) in Attachments section.
</p>
<p>
The first parameter must be a URL to source code. The parameter "inc" is used to specify the external
dependency URL and the others parameters are the same as <a class="missing wiki">LatexMacro?</a>
</p>
<p>
width
height
dpi
</p>
<p>
You can use the parameter "code" to specify a latex source code.
</p>
<p>
Ex.:
</p>
<pre class="wiki">[[LatexRender(code="$\frac{\alpha}{\beta}$",inc=mymacros.sty,inc=others.sty,width=800,height=600,dpi=300)]]
</pre><h3 id="LatexSpecialChar-macro"><code>[[LatexSpecialChar]]</code></h3><p>
HTML version for <a class="missing wiki">TexLatexSpecialCharMacro?</a>
    
</p>
<h3 id="LatexTable-macro"><code>[[LatexTable]]</code></h3><p>
HTML version for <a class="missing wiki">TexLatexTableMacro?</a>
    
</p>
<h3 id="LatexUsePkg-macro"><code>[[LatexUsePkg]]</code></h3><p>
HTML version for <a class="missing wiki">TexLatexUsePkgMacro?</a>
    
</p>
<h3 id="MacroList-macro"><code>[[MacroList]]</code></h3><p>
Display a list of all installed Wiki macros, including documentation if
available.
</p>
<p>
Optionally, the name of a specific macro can be provided as an argument. In
that case, only the documentation for that macro will be rendered.
</p>
<p>
Note that this macro will not be able to display the documentation of
macros if the <tt>PythonOptimize</tt> option is enabled for mod_python!
</p>
<h3 id="PageOutline-macro"><code>[[PageOutline]]</code></h3><p>
Display a structural outline of the current wiki page, each item in the
outline being a link to the corresponding heading.
</p>
<p>
This macro accepts four optional parameters:
</p>
<ul><li>The first is a number or range that allows configuring the minimum and
maximum level of headings that should be included in the outline. For
example, specifying "1" here will result in only the top-level headings
being included in the outline. Specifying "2-3" will make the outline
include all headings of level 2 and 3, as a nested list. The default is
to include all heading levels.
</li><li>The second parameter can be used to specify a custom title (the default
is no title).
</li><li>The third parameter selects the style of the outline. This can be
either <tt>inline</tt> or <tt>pullout</tt> (the latter being the default). The
<tt>inline</tt> style renders the outline as normal part of the content, while
<tt>pullout</tt> causes the outline to be rendered in a box that is by default
floated to the right side of the other content.
</li><li>The fourth parameter specifies whether the outline is numbered or not.
It can be either <tt>numbered</tt> or <tt>unnumbered</tt> (the former being the
default). This parameter only has an effect in <tt>inline</tt> style.
</li></ul><h3 id="Pod-macro"><code>[[Pod]]</code></h3><p>
Converts from Perl Plain Old Documentation format (POD) to HTML
</p>
<h3 id="RecentChanges-macro"><code>[[RecentChanges]]</code></h3><p>
List all pages that have recently been modified, ordered by the
time they were last modified.
</p>
<p>
This macro accepts two ordered arguments and a named argument. The named
argument can be placed in any position within the argument list.
</p>
<p>
The first parameter is a prefix string: if provided, only pages with names
that start with the prefix are included in the resulting list. If this
parameter is omitted, all pages are included in the list.
</p>
<p>
The second parameter is the maximum number of pages to include in the
list.
</p>
<p>
The <tt>group</tt> parameter determines how the list is presented:
<dl class="wiki"><dt><tt>group=date</tt></dt><dd>The pages are presented in bulleted lists that are
grouped by date (default).
</dd><dt><tt>group=none</tt></dt><dd>The pages are presented in a single bulleted list.
</p>
</dd></dl>
<p>
Tip: if you only want to specify a maximum number of entries and
don't want to filter by prefix, specify an empty first parameter,
e.g. <tt>[[RecentChanges(,10,group=none)]]</tt>.
</p>
<h3 id="RepositoryIndex-macro"><code>[[RepositoryIndex]]</code></h3><p>
Display the list of available repositories.
</p>
<p>
Can be given the following named arguments:
</p>
<dl class="wiki"><dt><em>format</em></dt><dd>
Select the rendering format:
<ul><li><em>compact</em> produces a comma-separated list of repository prefix
names (default)
</li><li><em>list</em> produces a description list of repository prefix names
</li><li><em>table</em> produces a table view, similar to the one visible in
the <em>Browse View</em> page
</li></ul></dd><dt><em>glob</em></dt><dd>
Do a glob-style filtering on the repository names (defaults to '*')
</dd><dt><em>order</em></dt><dd>
Order repositories by the given column (one of "name", "date" or
"author")
</dd><dt><em>desc</em></dt><dd>
When set to 1, order by descending order
</dd></dl>
<p>
(<em>since 0.12</em>)
</p>
<h3 id="TexHelloWorld-macro"><code>[[TexHelloWorld]]</code></h3><p>
Not supported yet or not useful in Latex enviroment.
    
</p>
<h3 id="TexImage-macro"><code>[[TexImage]]</code></h3><p>
This is the Tex version of Image macro.
</p>
<h3 id="TexInclude-macro"><code>[[TexInclude]]</code></h3><p>
This is the Tex version of Image macro.
</p>
<h3 id="TexInterTrac-macro"><code>[[TexInterTrac]]</code></h3><p>
Not supported yet or not useful in Latex enviroment.
    
</p>
<h3 id="TexLatex-macro"><code>[[TexLatex]]</code></h3><p>
Tex version to Latex <a class="missing wiki">WikiProcessor?</a>, does nothing,
just return the latex code.
</p>
<h3 id="TexLatexBasicHeaders-macro"><code>[[TexLatexBasicHeaders]]</code></h3><p>
Include some necessary packages and macros to render latex documents.
    
</p>
<h3 id="TexLatexBeginDoc-macro"><code>[[TexLatexBeginDoc]]</code></h3><p>
This inform to Trac2Latex parser where the document begins.
    
</p>
<h3 id="TexLatexCmd-macro"><code>[[TexLatexCmd]]</code></h3><p>
This macro inform to Trac2Latex parser a latex command
to be inserted.
</p>
<p>
Ex.:
</p>
<pre class="wiki">[[LatexCmd("\maketitle")]]
</pre><h3 id="TexLatexDocCls-macro"><code>[[TexLatexDocCls]]</code></h3><p>
This macro inform to Trac2Latex parser the document class and parameters.
</p>
<p>
Ex.:
</p>
<pre class="wiki">[[LatexDocClsMacro(atricle,a4paper)]]
</pre><h3 id="TexLatexEndDoc-macro"><code>[[TexLatexEndDoc]]</code></h3><p>
This inform to Trac2Latex parser where the document ends.
    
</p>
<h3 id="TexLatexGetRes-macro"><code>[[TexLatexGetRes]]</code></h3><p>
This macro inform to Trac2Latex parser a external dependency URL.
This dependency (picture, package, document class, etc...) will
be downloaded to a temporary directory.
</p>
<p>
Ex.:
</p>
<pre class="wiki">[[LatexGetRes(source:/docs/math.tex)]]
</pre><h3 id="TexLatexLongTable-macro"><code>[[TexLatexLongTable]]</code></h3><p>
Include all necessary packages and macros to render latex tables.
    
</p>
<h3 id="TexLatexRender-macro"><code>[[TexLatexRender]]</code></h3><p>
Not supported yet or not useful in Latex enviroment.
    
</p>
<h3 id="TexLatexSpecialChar-macro"><code>[[TexLatexSpecialChar]]</code></h3><p>
Return Tex version for some special characters, like %, $, alpha, beta, etc...
    
</p>
<h3 id="TexLatexTable-macro"><code>[[TexLatexTable]]</code></h3><p>
Include all necessary packages and macros to render latex tables.
    
</p>
<h3 id="TexLatexUsePkg-macro"><code>[[TexLatexUsePkg]]</code></h3><p>
This macro inform to Trac2Latex parser a package to be used (\usepackage).
</p>
<p>
Ex.:
</p>
<pre class="wiki">[[LatexUsePkg(tabular)]]
</pre><h3 id="TexMacroList-macro"><code>[[TexMacroList]]</code></h3><p>
Not supported yet or not useful in Latex enviroment.
    
</p>
<h3 id="TexPageOutline-macro"><code>[[TexPageOutline]]</code></h3><p>
Not supported yet or not useful in Latex enviroment.
    
</p>
<h3 id="TexRecentChanges-macro"><code>[[TexRecentChanges]]</code></h3><p>
Not supported yet or not useful in Latex enviroment.
    
</p>
<h3 id="TexTicketQuery-macro"><code>[[TexTicketQuery]]</code></h3><p>
Not supported yet or not useful in Latex enviroment.
    
</p>
<h3 id="TexTimestamp-macro"><code>[[TexTimestamp]]</code></h3><p>
Tex version to Timestamp macro. Return \today.
    
</p>
<h3 id="TexTitleIndex-macro"><code>[[TexTitleIndex]]</code></h3><p>
Not supported yet or not useful in Latex enviroment.
    
</p>
<h3 id="TexTracAdminHelp-macro"><code>[[TexTracAdminHelp]]</code></h3><p>
Not supported yet or not useful in Latex enviroment.
    
</p>
<h3 id="TexTracGuideToc-macro"><code>[[TexTracGuideToc]]</code></h3><p>
Not supported yet or not useful in Latex enviroment.
    
</p>
<h3 id="TexTracIni-macro"><code>[[TexTracIni]]</code></h3><p>
Not supported yet or not useful in Latex enviroment.
    
</p>
<h3 id="TicketQuery-macro"><code>[[TicketQuery]]</code></h3><p>
Wiki macro listing tickets that match certain criteria.
</p>
<p>
This macro accepts a comma-separated list of keyed parameters,
in the form "key=value".
</p>
<p>
If the key is the name of a field, the value must use the syntax
of a filter specifier as defined in <a class="wiki" href="TracQuery.html#QueryLanguage">TracQuery#QueryLanguage</a>.
Note that this is <em>not</em> the same as the simplified URL syntax
used for <tt>query:</tt> links starting with a <tt>?</tt> character. Commas (<tt>,</tt>)
can be included in field values by escaping them with a backslash (<tt>\</tt>).
</p>
<p>
Groups of field constraints to be OR-ed together can be separated by a
litteral <tt>or</tt> argument.
</p>
<p>
In addition to filters, several other named parameters can be used
to control how the results are presented. All of them are optional.
</p>
<p>
The <tt>format</tt> parameter determines how the list of tickets is
presented:
</p>
<ul><li><strong>list</strong> -- the default presentation is to list the ticket ID next
to the summary, with each ticket on a separate line.
</li><li><strong>compact</strong> -- the tickets are presented as a comma-separated
list of ticket IDs.
</li><li><strong>count</strong> -- only the count of matching tickets is displayed
</li><li><strong>table</strong>  -- a view similar to the custom query view (but without
the controls)
</li><li><strong>progress</strong> -- a view similar to the milestone progress bars
</li></ul><p>
The <tt>max</tt> parameter can be used to limit the number of tickets shown
(defaults to <strong>0</strong>, i.e. no maximum).
</p>
<p>
The <tt>order</tt> parameter sets the field used for ordering tickets
(defaults to <strong>id</strong>).
</p>
<p>
The <tt>desc</tt> parameter indicates whether the order of the tickets
should be reversed (defaults to <strong>false</strong>).
</p>
<p>
The <tt>group</tt> parameter sets the field used for grouping tickets
(defaults to not being set).
</p>
<p>
The <tt>groupdesc</tt> parameter indicates whether the natural display
order of the groups should be reversed (defaults to <strong>false</strong>).
</p>
<p>
The <tt>verbose</tt> parameter can be set to a true value in order to
get the description for the listed tickets. For <strong>table</strong> format only.
<em>deprecated in favor of the <tt>rows</tt> parameter</em>
</p>
<p>
The <tt>rows</tt> parameter can be used to specify which field(s) should
be viewed as a row, e.g. <tt>rows=description|summary</tt>
</p>
<p>
For compatibility with Trac 0.10, if there's a last positional parameter
given to the macro, it will be used to specify the <tt>format</tt>.
Also, using "&amp;" as a field separator still works (except for <tt>order</tt>)
but is deprecated.
</p>
<h3 id="TitleIndex-macro"><code>[[TitleIndex]]</code></h3><p>
Insert an alphabetic list of all wiki pages into the output.
</p>
<p>
Accepts a prefix string as parameter: if provided, only pages with names
that start with the prefix are included in the resulting list. If this
parameter is omitted, all pages are listed.
If the prefix is specified, a second argument of value <tt>hideprefix</tt>
can be given as well, in order to remove that prefix from the output.
</p>
<p>
Alternate <tt>format</tt> and <tt>depth</tt> named parameters can be specified:
</p>
<ul><li><tt>format=compact</tt>: The pages are displayed as comma-separated links.
</li><li><tt>format=group</tt>: The list of pages will be structured in groups
according to common prefix. This format also supports a <tt>min=n</tt>
argument, where <tt>n</tt> is the minimal number of pages for a group.
</li><li><tt>format=hierarchy</tt>: The list of pages will be structured according
to the page name path hierarchy. This format also supports a <tt>min=n</tt>
argument, where higher <tt>n</tt> flatten the display hierarchy
</li><li><tt>depth=n</tt>: limit the depth of the pages to list. If set to 0,
only toplevel pages will be shown, if set to 1, only immediate
children pages will be shown, etc. If not set, or set to -1,
all pages in the hierarchy will be shown.
</li><li><tt>include=page1:page*2</tt>: include only pages that match an item in the
colon-separated list of pages. If the list is empty, or if no <tt>include</tt>
argument is given, include all pages.
</li><li><tt>exclude=page1:page*2</tt>: exclude pages that match an item in the colon-
separated list of pages.
</li></ul><p>
The <tt>include</tt> and <tt>exclude</tt> lists accept shell-style patterns.
</p>
<h3 id="TracAdminHelp-macro"><code>[[TracAdminHelp]]</code></h3><p>
Display help for trac-admin commands.
</p>
<p>
Examples:
</p>
<pre class="wiki">[[TracAdminHelp]]               # all commands
[[TracAdminHelp(wiki)]]         # all wiki commands
[[TracAdminHelp(wiki export)]]  # the "wiki export" command
[[TracAdminHelp(upgrade)]]      # the upgrade command
</pre><h3 id="TracGuideToc-macro"><code>[[TracGuideToc]]</code></h3><p>
Display a table of content for the Trac guide.
</p>
<p>
This macro shows a quick and dirty way to make a table-of-contents
for the <a class="missing wiki">Help/Guide?</a>. The table of contents will contain the Trac* and
<a class="wiki" href="WikiFormatting.html">WikiFormatting</a> pages, and can't be customized. Search for <a class="missing wiki">TocMacro?</a> for a
a more customizable table of contents.
</p>
<h3 id="TracIni-macro"><code>[[TracIni]]</code></h3><p>
Produce documentation for the Trac configuration file.
</p>
<p>
Typically, this will be used in the <a class="wiki" href="TracIni.html">TracIni</a> page.
Optional arguments are a configuration section filter,
and a configuration option name filter: only the configuration
options whose section and name start with the filters are output.
</p>
<h3 id="Workflow-macro"><code>[[Workflow]]</code></h3><p>
Render a workflow graph.
</p>
<p>
This macro accepts a <a class="wiki" href="TracWorkflow.html">TracWorkflow</a> configuration and renders the states
and transitions as a directed graph. If no parameters are given, the
current ticket workflow is rendered. In <a class="wiki" href="WikiProcessors.html">WikiProcessors</a> mode the <tt>width</tt>
and <tt>height</tt> arguments can be specified.
</p>
<p>
(Defaults: <tt>width = 800</tt> and <tt>heigth = 600</tt>)
</p>
<p>
Examples:
</p>
<pre class="wiki">    [[Workflow()]]

    [[Workflow(go = here -&gt; there; return = there -&gt; here)]]

    {{{
    #!Workflow width=700 height=700
    leave = * -&gt; *
    leave.operations = leave_status
    leave.default = 1

    accept = new,assigned,accepted,reopened -&gt; accepted
    accept.permissions = TICKET_MODIFY
    accept.operations = set_owner_to_self

    resolve = new,assigned,accepted,reopened -&gt; closed
    resolve.permissions = TICKET_MODIFY
    resolve.operations = set_resolution

    reassign = new,assigned,accepted,reopened -&gt; assigned
    reassign.permissions = TICKET_MODIFY
    reassign.operations = set_owner

    reopen = closed -&gt; reopened
    reopen.permissions = TICKET_CREATE
    reopen.operations = del_resolution
    }}}
</pre></div><p>
</p>
<h2 id="Macrosfromaroundtheworld">Macros from around the world</h2>
<p>
The <a class="ext-link" href="http://trac-hacks.org/"><span class="icon">​</span>Trac Hacks</a> site provides a wide collection of macros and other Trac <a class="wiki" href="TracPlugins.html">plugins</a> contributed by the Trac community. If you are looking for new macros, or have written one that you would like to share with the world, don't hesitate to visit that site.
</p>
<h2 id="DevelopingCustomMacros">Developing Custom Macros</h2>
<p>
Macros, like Trac itself, are written in the <a class="ext-link" href="http://python.org/"><span class="icon">​</span>Python programming language</a> and are developed as part of <a class="wiki" href="TracPlugins.html">TracPlugins</a>.
</p>
<p>
For more information about developing macros, see the <a class="ext-link" href="http://trac.edgewall.org/intertrac/TracDev" title="TracDev in Trac project trac"><span class="icon">​</span>development resources</a> on the main project site.
</p>
<p>
Here are 2 simple examples showing how to create a Macro. Also, have a look at <a class="ext-link" href="http://trac.edgewall.org/intertrac/source%3Atags/trac-1.0.2/sample-plugins/Timestamp.py" title="source:tags/trac-1.0.2/sample-plugins/Timestamp.py in Trac project trac"><span class="icon">​</span>Timestamp.py</a> for an example that shows the difference between old style and new style macros and at the <a class="ext-link" href="http://trac.edgewall.org/intertrac/source%3Atags/trac-0.11/wiki-macros/README" title="source:tags/trac-0.11/wiki-macros/README in Trac project trac"><span class="icon">​</span>macros/README</a> which provides a little more insight about the transition.
</p>
<h3 id="Macrowithoutarguments">Macro without arguments</h3>
<p>
To test the following code, you should saved it in a <tt>timestamp_sample.py</tt> file located in the <a class="wiki" href="TracEnvironment.html">TracEnvironment</a>'s <tt>plugins/</tt> directory.
</p>
<div class="code"><pre><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> datetime
<span class="c"># Note: since Trac 0.11, datetime objects are used internally</span>

<span class="kn">from</span> <span class="nn">genshi.builder</span> <span class="kn">import</span> tag

<span class="kn">from</span> <span class="nn">trac.util.datefmt</span> <span class="kn">import</span> format_datetime<span class="p">,</span> utc
<span class="kn">from</span> <span class="nn">trac.wiki.macros</span> <span class="kn">import</span> WikiMacroBase

<span class="k">class</span> <span class="nc">TimeStampMacro</span><span class="p">(</span>WikiMacroBase<span class="p">):</span>
    <span class="sd">"""Inserts the current time (in seconds) into the wiki page."""</span>

    revision <span class="o">=</span> <span class="s">"$Rev$"</span>
    url <span class="o">=</span> <span class="s">"$URL$"</span>

    <span class="k">def</span> <span class="nf">expand_macro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> formatter<span class="p">,</span> name<span class="p">,</span> text<span class="p">):</span>
        t <span class="o">=</span> datetime<span class="o">.</span>now<span class="p">(</span>utc<span class="p">)</span>
        <span class="k">return</span> tag<span class="o">.</span>strong<span class="p">(</span>format_datetime<span class="p">(</span>t<span class="p">,</span> <span class="s">'</span><span class="si">%c</span><span class="s">'</span><span class="p">))</span>
</pre></div><h3 id="Macrowitharguments">Macro with arguments</h3>
<p>
To test the following code, you should save it in a <tt>helloworld_sample.py</tt> file located in the <a class="wiki" href="TracEnvironment.html">TracEnvironment</a>'s <tt>plugins/</tt> directory.
</p>
<div class="code"><pre><span class="kn">from</span> <span class="nn">genshi.core</span> <span class="kn">import</span> Markup

<span class="kn">from</span> <span class="nn">trac.wiki.macros</span> <span class="kn">import</span> WikiMacroBase

<span class="k">class</span> <span class="nc">HelloWorldMacro</span><span class="p">(</span>WikiMacroBase<span class="p">):</span>
    <span class="sd">"""Simple HelloWorld macro.

    Note that the name of the class is meaningful:
     - it must end with "Macro"
     - what comes before "Macro" ends up being the macro name

    The documentation of the class (i.e. what you're reading)
    will become the documentation of the macro, as shown by
    the !MacroList macro (usually used in the WikiMacros page).
    """</span>

    revision <span class="o">=</span> <span class="s">"$Rev$"</span>
    url <span class="o">=</span> <span class="s">"$URL$"</span>

    <span class="k">def</span> <span class="nf">expand_macro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> formatter<span class="p">,</span> name<span class="p">,</span> text<span class="p">,</span> args<span class="p">):</span>
        <span class="sd">"""Return some output that will be displayed in the Wiki content.

        `name` is the actual name of the macro (no surprise, here it'll be
        `'HelloWorld'`),
        `text` is the text enclosed in parenthesis at the call of the macro.
          Note that if there are ''no'' parenthesis (like in, e.g.
          [[HelloWorld]]), then `text` is `None`.
        `args` are the arguments passed when HelloWorld is called using a
        `#!HelloWorld` code block.
        """</span>
        <span class="k">return</span> <span class="s">'Hello World, text = </span><span class="si">%s</span><span class="s">, args = </span><span class="si">%s</span><span class="s">'</span> <span class="o">%</span> \
            <span class="p">(</span>Markup<span class="o">.</span>escape<span class="p">(</span>text<span class="p">),</span> Markup<span class="o">.</span>escape<span class="p">(</span><span class="nb">repr</span><span class="p">(</span>args<span class="p">)))</span>

</pre></div><p>
Note that <tt>expand_macro</tt> optionally takes a 4<sup>th</sup> parameter <em><tt>args</tt></em>. When the macro is called as a <a class="wiki" href="WikiProcessors.html">WikiProcessor</a>, it's also possible to pass <tt>key=value</tt> <a class="wiki" href="WikiProcessors.html#UsingProcessors">processor parameters</a>. If given, those are stored in a dictionary and passed in this extra <tt>args</tt> parameter. On the contrary, when called as a macro, <tt>args</tt> is  <tt>None</tt>. (<em>since 0.12</em>).
</p>
<p>
For example, when writing:
</p>
<pre class="wiki">{{{#!HelloWorld style="polite" -silent verbose
&lt;Hello World!&gt;
}}}

{{{#!HelloWorld
&lt;Hello World!&gt;
}}}

[[HelloWorld(&lt;Hello World!&gt;)]]
</pre><p>
One should get:
</p>
<pre class="wiki">Hello World, text = &lt;Hello World!&gt; , args = {'style': u'polite', 'silent': False, 'verbose': True}
Hello World, text = &lt;Hello World!&gt; , args = {}
Hello World, text = &lt;Hello World!&gt; , args = None
</pre><p>
Note that the return value of <tt>expand_macro</tt> is <strong>not</strong> HTML escaped. Depending on the expected result, you should escape it by yourself (using <tt>return Markup.escape(result)</tt>) or, if this is indeed HTML, wrap it in a Markup object (<tt>return Markup(result)</tt>) with <tt>Markup</tt> coming from Genshi, (<tt>from genshi.core import Markup</tt>).  
</p>
<p>
You can also recursively use a wiki Formatter (<tt>from trac.wiki import Formatter</tt>) to process the <tt>text</tt> as wiki markup:
</p>
<div class="code"><pre><span class="kn">from</span> <span class="nn">genshi.core</span> <span class="kn">import</span> Markup
<span class="kn">from</span> <span class="nn">trac.wiki.macros</span> <span class="kn">import</span> WikiMacroBase
<span class="kn">from</span> <span class="nn">trac.wiki</span> <span class="kn">import</span> Formatter
<span class="kn">import</span> <span class="nn">StringIO</span>

<span class="k">class</span> <span class="nc">HelloWorldMacro</span><span class="p">(</span>WikiMacroBase<span class="p">):</span>
        <span class="k">def</span> <span class="nf">expand_macro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> formatter<span class="p">,</span> name<span class="p">,</span> text<span class="p">,</span> args<span class="p">):</span>
                text <span class="o">=</span> <span class="s">"whatever '''wiki''' markup you want, even containing other macros"</span>
                <span class="c"># Convert Wiki markup to HTML, new style</span>
                out <span class="o">=</span> StringIO<span class="o">.</span>StringIO<span class="p">()</span>
                Formatter<span class="p">(</span><span class="bp">self</span><span class="o">.</span>env<span class="p">,</span> formatter<span class="o">.</span>context<span class="p">)</span><span class="o">.</span>format<span class="p">(</span>text<span class="p">,</span> out<span class="p">)</span>
                <span class="k">return</span> Markup<span class="p">(</span>out<span class="o">.</span>getvalue<span class="p">())</span>
</pre></div></div>
          
          <div class="trac-modifiedby">
            <span><a href="http://opus.nlpl.eu/letsmt-trac/wiki/WikiMacros?action=diff&amp;version=3" title="Version 3 by trac">Last modified</a> <a class="timeline" href="http://opus.nlpl.eu/letsmt-trac/timeline?from=2015-02-25T21%3A37%3A47Z&amp;precision=second" title="See timeline at Feb 25, 2015, 9:37:47 PM">6 years ago</a></span>
            <span class="trac-print">Last modified on Feb 25, 2015, 9:37:47 PM</span>
          </div>
        
        
      </div>
      

    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/letsmt-trac/pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="http://opus.nlpl.eu/letsmt-trac/wiki/WikiMacros?format=txt">Plain Text</a>
        </li><li>
          <a rel="nofollow" href="http://opus.nlpl.eu/letsmt-trac/wiki/WikiMacros?format=tex">Latex</a>
        </li><li class="last">
          <a rel="nofollow" href="http://opus.nlpl.eu/letsmt-trac/wiki/WikiMacros?format=pdf">Latex-Pdf</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="../about.html"><strong>Trac 1.0.1</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>